I"Ü<p><a href="https://vjudge.net/problem/POJ-3250">é¢˜ç›®é“¾æ¥</a>
ç»´æŠ¤ä¸€ä¸ªé€’å‡çš„å•è°ƒæ ˆï¼Œæ¯æ¬¡æ’å…¥åå½“å‰è¿™åªç‰›å¯ä»¥è¢«<code>q.size()-1</code>åªå·¦è¾¹çš„é«˜äºä»–çš„ç‰›çœ‹åˆ°ã€‚</p>
<pre><code class="language-cpp">#include&lt;cstdio&gt;
#include&lt;deque&gt;
using namespace std;
const int N=8e4+9;
typedef int ll;
typedef pair&lt;int,ll&gt; pil;
struct MonotoneQueue:deque&lt;pil&gt;
{
	void push(pil p,int k)
	{
		while(!empty()&amp;&amp;back().second&gt;=p.second)pop_back();
		for(push_back(p); p.first-front().first&gt;=k;)pop_front();
	}
} q;
long long ans;
int n,h;
int main()
{
	for(scanf("%d",&amp;n); n--;)
		scanf("%d",&amp;h),q.push(pil(n,-h),N),ans+=q.size()-1;
	printf("%lld",ans);
}
</code></pre>
:ET