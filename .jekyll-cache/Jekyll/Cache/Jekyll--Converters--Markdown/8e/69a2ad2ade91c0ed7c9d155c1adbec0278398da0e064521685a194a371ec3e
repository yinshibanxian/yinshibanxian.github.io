I"¤,<h1 id="é¡¹ç›®æ¦‚å†µ">é¡¹ç›®æ¦‚å†µ</h1>
<p>é¡¹ç›®åç§°ï¼šæŸç§‘å­¦çš„è¶…ä¼šè®®è®®ç¨‹ç®¡ç†ç³»ç»Ÿï¼ˆScientific Meeting Management Systemï¼‰
é¡¹ç›®ä»‹ç»ï¼šåŸºäºå‘½ä»¤è¡Œï¼Œå®ç°æ·»åŠ (add)ã€åˆ é™¤(delete)ã€ä¿®æ”¹(modify)ã€æŸ¥è¯¢(query)ç­‰è®®ç¨‹ç®¡ç†åŠŸèƒ½ã€‚</p>
<h1 id="éœ€æ±‚åˆ†æ">éœ€æ±‚åˆ†æ</h1>
<ul>
  <li>æ¯æ¬¡æ‰“å¼€ç³»ç»Ÿæ—¶ï¼Œè‡ªåŠ¨æ¢å¤ä¸Šæ¬¡çš„æ•°æ®ã€‚</li>
  <li>æ¯æ¬¡å…³é—­ç³»ç»Ÿæ—¶ï¼Œå°†æ•°æ®ä¿å­˜åˆ°æœ¬åœ°ã€‚</li>
  <li>å‘è®®ç¨‹ä¸­åŠ å…¥ä¸€ä¸ªä¼šè®®ï¼Œå½“ä¼šè®®ä¸ä»»ä½•å·²æœ‰çš„è®®ç¨‹éƒ½ä¸å†²çªæ—¶æˆåŠŸåŠ å…¥è®®ç¨‹ï¼Œå¦åˆ™æŠ¥é”™ã€‚</li>
  <li>æŸ¥è¯¢\ä¿®æ”¹\åˆ é™¤ï¼šæ ¹æ®å…³é”®å­—æŸ¥è¯¢\ä¿®æ”¹\åˆ é™¤ç›¸å…³è®®ç¨‹ã€‚</li>
  <li>æ¸…ç©ºåŠŸèƒ½ï¼šå°†è®®ç¨‹æ¸…ç©ºï¼Œä»¥ä¾¿é‡æ–°è¯»å…¥ã€‚</li>
</ul>

<h1 id="å®ç°æ€è·¯">å®ç°æ€è·¯</h1>
<h2 id="äº¤äº’ç¤ºæ„å›¾">äº¤äº’ç¤ºæ„å›¾</h2>
<p>ä»¥ä¸‹ç¤ºæ„å›¾ä¸­ä»¥<strong>SMMS</strong>ï¼ˆScientific Meeting Management Systemï¼‰ä»£è¡¨æœ¬ç³»ç»Ÿï¼Œ<strong>LOG</strong>ä»£è¡¨æœ¬åœ°ç¼“å­˜æ–‡ä»¶<code>log.txt</code>ï¼Œ<strong>STACK</strong>ä»£è¡¨ç”¨äºè®®ç¨‹ç®¡ç†çš„æ ˆç»“æ„ï¼ˆè§åï¼‰ã€‚</p>
<pre><code class="language-mermaid">sequenceDiagram
USER-&gt;&gt;SMMS:è¾“å…¥
LOG-&gt;&gt;SMMS:è¯»æ¡£
SMMS-&gt;&gt;STACK:å…³é”®å­—æœç´¢ã€æ“ä½œ
SMMS-&gt;&gt;LOG:å­˜æ¡£
SMMS-&gt;&gt;USER:è¾“å‡º
</code></pre>
<h2 id="ä½¿ç”¨é«˜æ•ˆçš„æ ˆç»“æ„è¿›è¡Œè®®ç¨‹ç®¡ç†">ä½¿ç”¨é«˜æ•ˆçš„æ ˆç»“æ„è¿›è¡Œè®®ç¨‹ç®¡ç†</h2>
<p>å¢åŠ ä¼šè®®æ—¶åªéœ€åŠ å…¥æ ˆé¡¶ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆ1ï¼‰ã€‚
ä¿®æ”¹æˆ–åˆ é™¤ä¼šè®®æ—¶ï¼Œåªéœ€å°†è¯¥å…ƒç´ å’Œæ ˆé¡¶å…ƒç´ äº¤æ¢ï¼Œç„¶åå¯¹æ ˆé¡¶å…ƒç´ è¿›è¡Œæ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦ä»ä¸ºOï¼ˆ1ï¼‰ã€‚
æ¸…ç©ºè®®ç¨‹æ—¶ï¼Œåªéœ€å°†æ ˆé¡¶æŒ‡é’ˆæŒ‡å‘æ ˆåº•è€Œæ— éœ€åœ¨æ•°ç»„ä¸­æ“¦é™¤æ•°æ®ï¼Œæ—¶é—´å¤æ‚åº¦ä»ä¸ºOï¼ˆ1ï¼‰ã€‚</p>
<h2 id="å…³é”®å­—æœç´¢">å…³é”®å­—æœç´¢</h2>
<blockquote>
  <p>å®šä¹‰ä¼šè®®nå’Œmç›¸å…³ï¼Œå½“ä¸”ä»…å½“æ»¡è¶³ä¸‹åˆ—ä»»æ„æ¡ä»¶ï¼š</p>
  <ul>
    <li>nå’ŒmåŒå</li>
    <li>nå’Œmæ—¶é—´æœ‰é‡åˆéƒ¨åˆ†ï¼Œå¹¶ä¸”åœ°ç‚¹ç›¸åŒæˆ–æœ‰ç›¸åŒäººå‘˜ï¼ˆæ¢è¨€ä¹‹ä¸¤åœºä¼šè®®æ˜¯å¦ä¸èƒ½åŒæ—¶ä¸¾è¡Œï¼‰</li>
  </ul>
</blockquote>

<p>åŸºäºä¼šè®®ç›¸å…³çš„å®šä¹‰ï¼Œå¯ä»¥åˆ¤æ–­ä¸€ä¸ªä¼šè®®æ˜¯å¦èƒ½å¤ŸåŠ å…¥è®®ç¨‹ï¼›ä¹Ÿå¯ä»¥åƒä¸‹é¢ä¸€æ ·è¿›è¡Œé«˜æ•ˆä¸¥å¯†çš„å…³é”®å­—æœç´¢ã€‚
ä¾‹å¦‚ï¼š</p>

<ul>
  <li>æŸ¥è¯¢\ä¿®æ”¹\åˆ é™¤ä¼šè®®åä¸ºNAMEçš„ä¼šè®®ï¼šæœç´¢æ—¶ä»…éœ€å°†key.nameè®¾ç½®ä¸ºâ€NAMEâ€ï¼Œå…¶ä½™è®¾ä¸º-1ã€‚</li>
  <li>æŸ¥è¯¢\ä¿®æ”¹\åˆ é™¤åœ°ç‚¹ä¸ºADDRESSçš„ä¼šè®®ï¼šå°†key.addressè®¾ä¸ºâ€ADDRESSâ€ï¼Œèµ·æ­¢æ—¶é—´åˆ†åˆ«è®¾æˆè´Ÿæ­£æ— ç©·ï¼Œå…¶ä½™è®¾ä¸º-1ã€‚</li>
  <li>æŸ¥è¯¢\ä¿®æ”¹\åˆ é™¤å«æœ‰å‚åŠ äººå‘˜PERSONçš„ä¼šè®®ï¼šå°†key.num_of_participantsè®¾ä¸º1ï¼Œkey.participants[0]è®¾ä¸ºâ€PERSONï¼Œèµ·æ­¢æ—¶é—´åˆ†åˆ«è®¾æˆè´Ÿæ­£æ— ç©·ï¼Œå…¶ä½™è®¾ä¸º-1ã€‚å¤šäººåŒç†ã€‚</li>
  <li>æŸ¥è¯¢\ä¿®æ”¹\åˆ é™¤å«æœ‰ä»¥ä¸Šå¤šå…³é”®å­—çš„ï¼Œå¯ä»¥ç±»ä¼¼åœ°è®¾ç½®keyã€‚</li>
</ul>

<h2 id="ä»£ç æ¨¡å—åŒ–ä¸”æ¥å£å…¨éƒ¨ä½¿ç”¨æ–‡ä»¶æµ">ä»£ç æ¨¡å—åŒ–ï¼Œä¸”æ¥å£å…¨éƒ¨ä½¿ç”¨æ–‡ä»¶æµ</h2>
<p>æ‰€æœ‰å‡½æ•°æ¥å£å‡ä½¿ç”¨æ–‡ä»¶æµ<code>FILE*</code>ï¼Œä¸ºå¿«é€Ÿåˆ‡æ¢æ–‡ä»¶\å±å¹•IOæä¾›å¾ˆå¤§ä¾¿åˆ©ã€‚
ä¸æ­¤ç›¸å¯¹åº”çš„ï¼Œæ‰€æœ‰çš„IOå‡é€šè¿‡å‡½æ•°fscanfå’Œfprintfå®ç°ã€‚
æ‰€æœ‰çš„IOå‡å†™æœ‰æç¤ºï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚</p>

<h1 id="é¡¹ç›®æµ‹è¯•">é¡¹ç›®æµ‹è¯•</h1>
<p>åŒæ–‡ä»¶å¤¹ä¸‹<code>log.txt</code>æ–‡æ¡£ä¸­ä¿å­˜äº†ç”¨äºæµ‹è¯•çš„æ•°æ®ï¼Œè¿è¡Œç»“æœå‡ç¬¦åˆé¢„æœŸã€‚</p>
<h1 id="ä»£ç æ¥å£ä¸å®ç°">ä»£ç æ¥å£ä¸å®ç°</h1>
<p>ä»£ç å®ç°åˆ†ä¸ºæ•°æ®ç»“æ„å’ŒåŠŸèƒ½å‡½æ•°ä¸¤ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«å¯¹å…¶å±•å¼€ä»‹ç»ã€‚æ‰€æœ‰å¤´æ–‡ä»¶å‡å†™æœ‰å¤´æ–‡ä»¶ä¿æŠ¤ã€‚</p>
<h2 id="æ•°æ®ç»“æ„meetingh">æ•°æ®ç»“æ„meeting.h</h2>
<ul>
  <li>å®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“Meetingï¼Œç”¨äºæè¿°ä¸€åœºä¼šè®®ï¼Œå†…å®¹è§ä¸‹ï¼ŒæœªåŠ æ³¨é‡Šã€‚å…¶ä¸­ï¼Œ<code>struct tm</code>æ˜¯cæ ‡å‡†åº“<code>&lt;time.h&gt;</code>ä¸­å®šä¹‰çš„ç”¨äºä¿å­˜æ—¶é—´çš„ç»“æ„ä½“ã€‚</li>
  <li>å®šä¹‰äº†è‹¥å¹²å¯¹Meetingç»“æ„ä½“çš„æ“ä½œã€‚</li>
  <li>defineäº†ä¸€ä¸ªå¸¸é‡MAXNï¼Œæš‚å®šä¸º128ï¼Œç”¨æ¥è¡¨ç¤ºMeetingä¸­æ‰€ç”¨æ•°ç»„çš„æœ€å¤§å®¹é‡ã€‚å®é™…ä½¿ç”¨æ—¶å¯æ ¹æ®éœ€æ±‚ä¿®æ”¹MAXNçš„defineå¹¶é‡æ–°ç¼–è¯‘ï¼Œååˆ†æ–¹ä¾¿ã€‚</li>
</ul>

<pre><code class="language-c">#define MAXN 128
typedef struct Meeting
{
	int num_of_participants;//å‚ä¼šäººæ•°
	char name[MAXN],//ä¼šè®®åç§°
	     address[MAXN],//ä¼šè®®åœ°å€
	     participants[MAXN][MAXN];//å‚ä¼šäººå‘˜
	struct tm begin,end;//èµ·æ­¢æ—¶é—´
} Meeting;

//ä»inä¸­è¯»å…¥ä¸€ä¸ªMeetingï¼Œå¹¶å°†è¾“å…¥æ—¶çš„æç¤ºä¿¡æ¯è¾“å‡ºåˆ°out
Meeting getMeeting(FILE *in,FILE *out);

//æŠŠmè¾“å‡ºåˆ°out
void putMeeting(FILE *out,const Meeting *m);

//æ¯”è¾ƒä¸¤ä¸ªæ—¶é—´aå’Œbçš„å…ˆåå…³ç³»
int tmCmp(const struct tm *a,const struct tm *b);

//åˆ¤æ–­ä¼šè®®må’Œnæ˜¯å¦å†²çª
int isRepel(const Meeting *m,const Meeting *n);
</code></pre>
<h3 id="å®ç°-meetingc">å®ç° meeting.c</h3>
<pre><code class="language-c">Meeting getMeeting(FILE *in,FILE *out)
{
	Meeting tmp_m;
	fprintf(out,"Input the Meeting name.\n");
	fscanf(in,"%s",tmp_m.name);

	fprintf(out,"Input the Meeting address.\n");
	fscanf(in,"%s",tmp_m.address);

	fprintf(out,"Input the begin time(year month day hour minute).\n");
	fscanf(in,"%d%d%d%d%d",
	       &amp;tmp_m.begin.tm_year,
	       &amp;tmp_m.begin.tm_mon,
	       &amp;tmp_m.begin.tm_mday,
	       &amp;tmp_m.begin.tm_hour,
	       &amp;tmp_m.begin.tm_min);

	fprintf(out,"Input the end time(year month day hour minute).\n");
	fscanf(in,"%d%d%d%d%d",
	       &amp;tmp_m.end.tm_year,
	       &amp;tmp_m.end.tm_mon,
	       &amp;tmp_m.end.tm_mday,
	       &amp;tmp_m.end.tm_hour,
	       &amp;tmp_m.end.tm_min);

	fprintf(out,"Input the number of participants.\n");
	fscanf(in,"%d",&amp;tmp_m.num_of_participants);

	for(int i=0; i&lt;tmp_m.num_of_participants; ++i)
	{
		fprintf(out,"Input the name of participant %d.\n",i);
		fscanf(in,"%s",tmp_m.participants[i]);
	}

	return tmp_m;
}

void putMeeting(FILE *out,const Meeting *m)
{
	fprintf(out,"%s %s\n%d %d %d %d %d\n%d %d %d %d %d\n%d",
	        m-&gt;name,
	        m-&gt;address,
	        m-&gt;begin.tm_year,
	        m-&gt;begin.tm_mon,
	        m-&gt;begin.tm_mday,
	        m-&gt;begin.tm_hour,
	        m-&gt;begin.tm_min,
	        m-&gt;end.tm_year,
	        m-&gt;end.tm_mon,
	        m-&gt;end.tm_mday,
	        m-&gt;end.tm_hour,
	        m-&gt;end.tm_min,
	        m-&gt;num_of_participants);
	for(int j=0; j&lt; m-&gt;num_of_participants; ++j)
		fprintf(out," %s",m-&gt;participants[j]);
	fprintf(out,"\n");
}

int tmCmp(const struct tm *a,const struct tm *b)
{
	if(a-&gt;tm_year != b-&gt;tm_year)
		return a-&gt;tm_year - b-&gt;tm_year;
	if(a-&gt;tm_mon != b-&gt;tm_mon)
		return a-&gt;tm_mon - b-&gt;tm_mon;
	if(a-&gt;tm_mday != b-&gt;tm_mday)
		return a-&gt;tm_mday - b-&gt;tm_mday;
	if(a-&gt;tm_hour != b-&gt;tm_hour)
		return a-&gt;tm_hour - b-&gt;tm_hour;
	return a-&gt;tm_min - b-&gt;tm_min;
}

int isRepel(const Meeting *p,const Meeting *q)
{
	if(!strcmp(p-&gt;name,q-&gt;name))
		return 1;
	if(tmCmp(&amp;p-&gt;end,&amp;q-&gt;begin)&lt;0||tmCmp(&amp;p-&gt;begin,&amp;q-&gt;end)&gt;0)
		return 0;
	if(!strcmp(p-&gt;address,q-&gt;address))
		return 1;
	for(int i=0; i &lt; p-&gt;num_of_participants; ++i)
		for(int j=0; j &lt; q-&gt;num_of_participants; ++j)
			if(!strcmp(p-&gt;participants[i],q-&gt;participants[j]))
				return 1;
	return 0;
}
</code></pre>
<h2 id="åŠŸèƒ½å‡½æ•°funch">åŠŸèƒ½å‡½æ•°func.h</h2>
<ul>
  <li>é€‰ç”¨æ ˆç»“æ„ç”¨äºå­˜å‚¨ä¼šè®®ï¼Œç”¨æ•°ç»„å’Œè®°å½•æ ˆé¡¶ä¸‹æ ‡çš„å˜é‡å®ç°ã€‚é™¤æ­¤ä¹‹å¤–<strong>æœªç”¨ä»»ä½•å…¨å±€å˜é‡</strong>ã€‚</li>
  <li>å®ç°äº†éœ€æ±‚åˆ†æä¸­çš„æ‰€æœ‰åŠŸèƒ½å‡½æ•°ã€‚</li>
  <li>æ‰€æœ‰åŠŸèƒ½å‡½æ•°å‡æœ‰ç›¸åŒçš„æ¥å£<code>(FILE *in,FILE *out)</code>è¡¨ç¤ºä»inä¸­è·å–æ•°æ®ï¼Œå¹¶é€šè¿‡outè¾“å‡ºä¿¡æ¯ã€‚è¿™æ ·çš„è®¾è®¡æ—¢æ–¹ä¾¿äº†ä»£ç çš„è°ƒè¯•ï¼Œä¹Ÿæ–¹ä¾¿äº†ç”¨æˆ·çš„äº¤äº’ã€‚</li>
</ul>

<pre><code class="language-c">extern int top;
extern Meeting stack[MAXN];

//è¯»å…¥ä¼šè®®ï¼Œè‹¥ä¸äº§ç”Ÿå†²çªåˆ™åŠ å…¥è®®ç¨‹ï¼Œå¦åˆ™æŠ¥é”™
void add(FILE *in,FILE *out);

//æŒ‰å…³é”®å­—åˆ é™¤ä¼šè®®
void del(FILE *in,FILE *out);

//æŒ‰å…³é”®å­—ä¿®æ”¹ä¼šè®®
void modify(FILE *in,FILE *out);

//æŒ‰å…³é”®å­—æŸ¥è¯¢ä¼šè®®
void query(FILE *in,FILE *out);

//è¯»æ¡£
void fin(FILE *in,FILE *out);

//å­˜æ¡£
void fout(FILE *in,FILE *out);

//æ¸…ç©º
void clear(FILE *in,FILE *out);

//è¾“å‡ºæç¤ºä¿¡æ¯
void help(FILE *in,FILE *out);
</code></pre>
<h3 id="å®ç°-funcc">å®ç° func.c</h3>
<pre><code class="language-c">int top=0;
Meeting stack[MAXN];

void add(FILE *in,FILE *out)
{
	stack[top]=getMeeting(in,out);
	for(int i=0; i&lt;top; ++i)
		if(isRepel(&amp;stack[top],&amp;stack[i]))
		{
			fprintf(out,"Error: Repel with Meeting %s.\n",stack[i].name);
			return;
		}
	fprintf(out,"Add %s successfully.\n",stack[top++].name);
}

void del(FILE *in,FILE *out)
{
	fprintf(out,"Input the key(-1 for no key).\n");
	Meeting key=getMeeting(in,out);
	for(int i=0; i&lt;top; ++i)
		if(isRepel(&amp;key,&amp;stack[i]))
		{
			fprintf(out,"Delele %s successfully.\n",stack[i].name);
			stack[i--]=stack[--top];
		}
}

void modify(FILE *in,FILE *out)
{
	int t_len=top;
	del(in,out);
	while(top&lt;t_len)
		add(in,out);
}

void query(FILE *in,FILE *out)
{
	fprintf(out,"Input the key(-1 for no key).\n");
	Meeting key=getMeeting(in,out);
	for(int i=0; i&lt;top; ++i)
		if(isRepel(&amp;key,&amp;stack[i]))
		{
			fprintf(out,"Find ");
			putMeeting(out,&amp;stack[i]);
		}
}

void fin(FILE *in,FILE *out)
{
	fprintf(out,"Start input from \'log.txt\'.\n");
	FILE *f=fopen("log.txt","r");
	if(f==NULL)
	{
		fprintf(out,"Error:Do not find \'log.txt\'\n");
		return;
	}
	int t_len;
	fscanf(f,"%d",&amp;t_len);
	while(t_len--)
		add(f,out);
	fclose(f);
	fprintf(out,"Input from \'log.txt\' successfully.\n");
}

void fout(FILE *in,FILE *out)
{
	fprintf(out,"Start output to \'log.txt\'.\n");
	FILE *f=fopen("log.txt","w");
	fprintf(f,"%d\n",top);
	for(int i=0; i&lt;top; ++i)
		putMeeting(f,&amp;stack[i]);
	fclose(f);
	fprintf(out,"Output to \'log.txt\' successfully.\n");
}

void clear(FILE *in,FILE *out)
{
	top=0;
	fprintf(out,"Clear successfully.\n");
}

void help(FILE *in,FILE *out)
{
	fprintf(out,"fin : add new meetings from \'log.txt\' to memory if they do not repel.\n");
	fprintf(out,"fout : output all the meetings from memory to \'log.txt\'.\n");
	fprintf(out,"add : add a new meeting to memory if it does not repel.\n");
	fprintf(out,"delete : delete all the meetings which repel with the key.\n");
	fprintf(out,"modify : modify all the meetings which repel with the key.\n");
	fprintf(out,"clear : clear all the meetings from memory.\n");
	fprintf(out,"help : get available instructions.\n");
	fprintf(out,"EOF(Ctrl+Z in Windows) : exit.\n");
}
</code></pre>
<h2 id="æµ‹è¯•">æµ‹è¯•</h2>
<pre><code class="language-c">#include&lt;stdio.h&gt;
#include&lt;string.h&gt;
#include"func.h"

int main()
{
	FILE *in=stdin,*out=stdout;
	fprintf(out,"Scientific Meeting Management System by WuK&amp;LSY\n\n");
	fprintf(out,"Input \'fin\' to read from log,or \'help\' to get other available instructions.\n\n");
	for(char s[MAXN]; fscanf(in,"%s",s)!=EOF; fprintf(out,"\n"))
	{
		if(!strcmp(s,"add"))
			add(in,out);
		else if(!strcmp(s,"delete"))
			del(in,out);
		else if(!strcmp(s,"modify"))
			modify(in,out);
		else if(!strcmp(s,"query"))
			query(in,out);
		else if(!strcmp(s,"fin"))
			fin(in,out);
		else if(!strcmp(s,"fout"))
			fout(in,out);
		else if(!strcmp(s,"clear"))
			clear(in,out);
		else if(!strcmp(s,"help"))
			help(in,out);
		else fprintf(out,"\'%s\' is not an available instruction,and you can in \'help\' to get available instructions.\n",s);
	}
}
</code></pre>
:ET