I"È&<p>è·Ÿç€<a href="https://blog.csdn.net/lwt36/article/details/48908031">è¿™ç¯‡åšå®¢</a>å¤ä¹ æ‰«æçº¿+çº¿æ®µæ ‘â€¦</p>
<h1 id="atlantis">Atlantis</h1>
<p><a href="https://vjudge.net/problem/HDU-1542">é¢˜ç›®é“¾æ¥</a></p>

<p>æ±‚çŸ©å½¢å¹¶ï¼Œå³å¹³é¢ä¸Šè‡³å°‘è¢«ä¸€ä¸ªçŸ©å½¢è¦†ç›–çš„é¢ç§¯ã€‚</p>

<blockquote>
  <p>ç¦»æ•£åŒ–: è¿™äº›æŠ€å·§éƒ½æ˜¯è€ç”Ÿå¸¸è°ˆçš„äº†ï¼Œä¸ç„¶æµ®ç‚¹æ•°æ€ä¹ˆå»ºæ ‘ï¼Œç¦»æ•£åŒ–xåæ ‡å°±å¯ä»¥äº†ã€‚</p>

  <p>æ‰«æçº¿: é¦–å…ˆæŠŠçŸ©å½¢æŒ‰yè½´åˆ†æˆä¸¤æ¡è¾¹ï¼Œä¸Šè¾¹å’Œä¸‹è¾¹ï¼Œå¯¹xè½´å»ºæ ‘ï¼Œæ‰«æçº¿å¯ä»¥çœ‹æˆä¸€æ ¹å¹³è¡Œäºxè½´çš„ç›´çº¿ã€‚ä»y=0å¼€å§‹å¾€ä¸Šæ‰«ï¼Œä¸‹è¾¹è¡¨ç¤ºè¦è®¡ç®—é¢ç§¯+1ï¼Œä¸Šè¾¹è¡¨ç¤ºå·²ç»æ‰«è¿‡äº†âˆ’1ï¼Œç›´åˆ°æ‰«åˆ°æœ€åä¸€æ¡å¹³è¡Œäºxxè½´çš„è¾¹ä½†æ˜¯çœŸæ­£åœ¨åšçš„æ—¶å€™ï¼Œä¸éœ€è¦å®Œå…¨æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼Œä¸€æ¡ä¸€æ¡è¾¹åœ°æ’å…¥çº¿æ®µæ ‘å°±å¥½äº†ã€‚</p>

  <p>çº¿æ®µæ ‘: ç”¨äºåŠ¨æ€ç»´æŠ¤æ‰«æçº¿åœ¨å¾€ä¸Šèµ°æ—¶ï¼Œxè½´å“ªäº›åŒºåŸŸæ˜¯æœ‰åˆæ³•é¢ç§¯çš„ã€‚è¿™ç§çº¿æ®µæ ‘æ˜¯ä¸ç”¨æ‡’æ ‡è®°çš„ï¼Œå› ä¸ºæ²¡æœ‰æŸ¥è¯¢æ“ä½œ</p>
</blockquote>

<pre><code class="language-cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef double ll;
struct Ranker : vector&lt;ll&gt;
{
	void init() { sort(begin(), end()), resize(unique(begin(), end()) - begin()); }
	int ask(ll x) const { return lower_bound(begin(), end(), x) - begin(); }
};
struct AreaUnion
{
	struct Seg
	{
		ll l, r, h;
		int f;
		bool operator&lt;(const Seg &amp;rhs) const { return h &lt; rhs.h; }
	};
	struct Node
	{
		int cnt;
		ll sum;
	};
	vector&lt;Seg&gt; s;
	vector&lt;Node&gt; v;
	Ranker rk;
	void add(ll l, ll b, ll r, ll t)
	{
		rk.push_back(l);
		rk.push_back(r);
		s.push_back({l, r, b, 1});
		s.push_back({l, r, t, -1});
	}
	void upd(int ql, int qr, int c, int l, int r, int rt = 1)
	{
		if (ql &lt;= l &amp;&amp; r &lt;= qr)
			v[rt].cnt += c;
		else
		{
			int m = l + r &gt;&gt; 1;
			if (ql &lt;= m)
				upd(ql, qr, c, l, m, rt &lt;&lt; 1);
			if (qr &gt; m)
				upd(ql, qr, c, m + 1, r, rt &lt;&lt; 1 | 1);
		}
		v[rt].sum = v[rt].cnt ? rk[r + 1] - rk[l] : l &lt; r ? v[rt &lt;&lt; 1].sum + v[rt &lt;&lt; 1 | 1].sum : 0;
	}
	ll ask()
	{
		rk.init();
		sort(s.begin(), s.end());
		v.assign(rk.size() * 4, Node());
		ll ans = 0;
		for (int i = 0; i + 1 &lt; s.size(); ++i)
		{
			upd(rk.ask(s[i].l), rk.ask(s[i].r) - 1, s[i].f, 0, rk.size() - 1);
			ans += v[1].sum * (s[i + 1].h - s[i].h);
		}
		return ans;
	}
};
int main()
{
	for (int kase = 0, n; ~scanf("%d", &amp;n) &amp;&amp; n;)
	{
		AreaUnion a;
		for (int i = 0; i &lt; n; ++i)
		{
			ll l, b, r, t;
			scanf("%lf%lf%lf%lf", &amp;l, &amp;b, &amp;r, &amp;t);
			a.add(l, b, r, t);
		}
		printf("Test case #%d\nTotal explored area: %.2lf\n\n", ++kase, a.ask());
	}
}
</code></pre>
<h1 id="è¦†ç›–çš„é¢ç§¯">è¦†ç›–çš„é¢ç§¯</h1>
<p><a href="https://vjudge.net/problem/HDU-1255">é¢˜ç›®é“¾æ¥</a></p>

<p>æ±‚çŸ©å½¢äº¤ï¼Œå³å¹³é¢ä¸Šè‡³å°‘è¢«è¦†ç›–ä¸¤æ¬¡çš„é¢ç§¯ã€‚çº¿æ®µæ ‘ä¸Šç»´æŠ¤è¢«è¦†ç›–ä¸€æ¬¡çš„é•¿åº¦å’Œè¢«è¦†ç›–ä¸¤æ¬¡çš„é•¿åº¦ã€‚</p>

<blockquote>
  <p>å‰é¢çš„ä¸çŸ©å½¢é¢ç§¯å¹¶ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯è¦è€ƒè™‘è‡³å°‘è¦†ç›–ä¸€æ¬¡oneå’Œè‡³å°‘è¦†ç›–ä¸¤æ¬¡twoçš„æ›´æ–°ã€‚</p>

  <p>å°¤å…¶æ˜¯å½“å‰è¢«è¦†ç›–äº†ä¸€æ¬¡çš„æ—¶å€™ï¼Œç”±äºæ²¡æœ‰downæ“ä½œï¼Œçˆ¶äº²èŠ‚ç‚¹çš„ä¿¡æ¯æ˜¯æ²¡æœ‰åŒæ­¥åˆ°å„¿å­èŠ‚ç‚¹çš„ï¼Œè¿™æ ·çš„è¯upå°±è¦è€ƒè™‘äº†ã€‚</p>

  <p>çˆ¶äº²è¢«è®°å½•è¦†ç›–äº†ä¸€æ¬¡ï¼Œä½†æ˜¯å¦‚æœå„¿å­è¢«è¦†ç›–è¿‡ï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯åœ¨è¿™ä¸ªçˆ¶äº²è¿™ä¸ªå¤§åŒºé—´ä¸Šçš„ï¼Œå°±ç›¸å½“äºçˆ¶äº²åŒºé—´è¢«è¦†ç›–äº†è‡³å°‘ä¸¤æ¬¡ï¼Œæ‰€ä»¥twoå’Œoneéƒ½è¦æ›´æ–°ã€‚</p>
</blockquote>

<pre><code class="language-cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef double ll;
struct Ranker : vector&lt;ll&gt;
{
	void init() { sort(begin(), end()), resize(unique(begin(), end()) - begin()); }
	int ask(ll x) const { return lower_bound(begin(), end(), x) - begin(); }
};
struct AreaIntersection
{
	struct Seg
	{
		ll l, r, h;
		int f;
		bool operator&lt;(const Seg &amp;rhs) const { return h &lt; rhs.h; }
	};
	struct Node
	{
		int cnt;
		ll one, two;
	};
	vector&lt;Seg&gt; s;
	vector&lt;Node&gt; v;
	Ranker rk;
	void add(ll l, ll b, ll r, ll t)
	{
		rk.push_back(l);
		rk.push_back(r);
		s.push_back({l, r, b, 1});
		s.push_back({l, r, t, -1});
	}
	void upd(int ql, int qr, int c, int l, int r, int rt = 1)
	{
		if (ql &lt;= l &amp;&amp; r &lt;= qr)
			v[rt].cnt += c;
		else
		{
			int m = l + r &gt;&gt; 1;
			if (ql &lt;= m)
				upd(ql, qr, c, l, m, rt &lt;&lt; 1);
			if (qr &gt; m)
				upd(ql, qr, c, m + 1, r, rt &lt;&lt; 1 | 1);
		}
		if (v[rt].cnt == 0)
		{
			v[rt].one = l != r ? v[rt &lt;&lt; 1].one + v[rt &lt;&lt; 1 | 1].one : 0;
			v[rt].two = l != r ? v[rt &lt;&lt; 1].two + v[rt &lt;&lt; 1 | 1].two : 0;
		}
		else
		{
			v[rt].one = rk[r + 1] - rk[l];
			if (v[rt].cnt &gt; 1)
				v[rt].two = rk[r + 1] - rk[l];
			else
				v[rt].two = l != r ? v[rt &lt;&lt; 1].one + v[rt &lt;&lt; 1 | 1].one : 0;
		}
	}
	ll ask()
	{
		rk.init();
		sort(s.begin(), s.end());
		v.assign(rk.size() * 4, Node());
		ll ans = 0;
		for (int i = 0; i + 1 &lt; s.size(); ++i)
		{
			upd(rk.ask(s[i].l), rk.ask(s[i].r) - 1, s[i].f, 0, rk.size() - 1);
			ans += v[1].two * (s[i + 1].h - s[i].h);
		}
		return ans;
	}
};
int main()
{
	int t, n;
	for (scanf("%d", &amp;t); t--;)
	{
		AreaIntersection a;
		scanf("%d", &amp;n);
		for (ll l, b, r, t; n--;)
		{
			scanf("%lf%lf%lf%lf", &amp;l, &amp;b, &amp;r, &amp;t);
			a.add(l, b, r, t);
		}
		printf("%.2lf\n", a.ask());
	}
}
</code></pre>
<h1 id="picture">Picture</h1>
<p><a href="https://vjudge.net/problem/HDU-1828">é¢˜ç›®é“¾æ¥</a></p>

<p>æ±‚çŸ©å½¢å‘¨é•¿å¹¶ã€‚</p>
<h2 id="è§£æ³•ä¸€">è§£æ³•ä¸€</h2>
<blockquote>
  <p>å¯ä»¥ç”¨ç±»ä¼¼çŸ©å½¢é¢ç§¯å¹¶çš„åŠæ³•ï¼Œä¸è¿‡è¿™æ¬¡æˆ‘ä»¬ï¼Œä¸ç®—é¢ç§¯ç½¢äº†ã€‚</p>

  <p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºå‘¨é•¿çš„çº¿ä¼šè¢«é‡å¤è¦†ç›–ï¼Œæ¯æ¬¡éœ€è¦å’Œä¸Šä¸€æ¬¡çš„ä½œå·®ã€‚</p>

  <p>ä½†æ˜¯è¿™æ ·ä»…ä»…æ˜¯xè½´çš„ï¼Œä¸è¿‡å¯ä»¥å†å¯¹yè½´åšä¸€æ¬¡åŠ èµ·æ¥å°±å¯ä»¥äº†ã€‚</p>
</blockquote>

<pre><code class="language-cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef int ll;
struct Ranker : vector&lt;ll&gt;
{
	void init() { sort(begin(), end()), resize(unique(begin(), end()) - begin()); }
	int ask(ll x) const { return lower_bound(begin(), end(), x) - begin(); }
};
struct HalfPerimeter
{
	struct Seg
	{
		ll l, r, h;
		int f;
		bool operator&lt;(const Seg &amp;rhs) const { return h != rhs.h ? h &lt; rhs.h : f &gt; rhs.f; }
	};
	struct Node
	{
		int cnt;
		ll sum;
	};
	vector&lt;Seg&gt; s;
	vector&lt;Node&gt; v;
	Ranker rk;
	ll add(ll l, ll b, ll r, ll t)
	{
		rk.push_back(l);
		rk.push_back(r);
		s.push_back({l, r, b, 1});
		s.push_back({l, r, t, -1});
	}
	void upd(int L, int R, int c, int l, int r, int rt = 1)
	{
		if (L &lt;= l &amp;&amp; r &lt;= R)
			v[rt].cnt += c;
		else
		{
			int m = l + r &gt;&gt; 1;
			if (L &lt;= m)
				upd(L, R, c, l, m, rt &lt;&lt; 1);
			if (R &gt; m)
				upd(L, R, c, m + 1, r, rt &lt;&lt; 1 | 1);
		}
		v[rt].sum = v[rt].cnt ? rk[r + 1] - rk[l] : l != r ? v[rt &lt;&lt; 1].sum + v[rt &lt;&lt; 1 | 1].sum : 0;
	}
	ll ask()
	{
		rk.init();
		sort(s.begin(), s.end());
		v.assign(rk.size() &lt;&lt; 2, Node());
		ll ans = 0;
		for (int i = 0; i &lt; s.size(); ++i)
		{
			ll last = v[1].sum;
			upd(rk.ask(s[i].l), rk.ask(s[i].r) - 1, s[i].f, 0, rk.size() - 1);
			ans += abs(v[1].sum - last);
		}
		return ans;
	}
};
int main()
{
	for (int n; ~scanf("%d", &amp;n);)
	{
		HalfPerimeter x, y;
		for (int i = 0, l, b, r, t; i &lt; n; ++i)
		{
			scanf("%d%d%d%d", &amp;l, &amp;b, &amp;r, &amp;t);
			x.add(l, b, r, t);
			y.add(b, l, t, r);
		}
		printf("%d\n", x.ask() + y.ask());
	}
}
</code></pre>
<h2 id="è§£æ³•äºŒ">è§£æ³•äºŒ</h2>
<blockquote>
  <p>ä¹Ÿå¯ä»¥åªå¯¹xè½´åšä¸€æ¬¡æ‰«æçº¿ï¼Œåªè¦åŒæ—¶ç»´æŠ¤yè½´ç«–çº¿ï¼ˆå°±æ˜¯æ±‚çŸ©å½¢é¢ç§¯å¹¶çš„æ—¶å€™çš„é«˜ï¼‰çš„ä¸ªæ•°vtlã€‚</p>

  <p>éœ€è¦çš„æ³¨æ„çš„æ˜¯ç«–çº¿é‡åˆçš„æƒ…å†µï¼Œéœ€è¦å†å¼€å˜é‡lbdã€rbdæ¥åˆ¤æ–­é‡åˆï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</p>
</blockquote>

<pre><code class="language-cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef int ll;
struct Ranker : vector&lt;ll&gt;
{
	void init() { sort(begin(), end()), resize(unique(begin(), end()) - begin()); }
	int ask(ll x) const { return lower_bound(begin(), end(), x) - begin(); }
};
struct Perimeter
{
	struct Seg
	{
		ll l, r, h;
		int f;
		bool operator&lt;(const Seg &amp;rhs) const { return h &lt; rhs.h; }
	};
	struct Node
	{
		int cnt;
		ll sum, vtl, lbd, rbd;
	};
	vector&lt;Seg&gt; s;
	vector&lt;Node&gt; v;
	Ranker rk;
	void add(ll l, ll b, ll r, ll t)
	{
		rk.push_back(l);
		rk.push_back(r);
		s.push_back({l, r, b, 1});
		s.push_back({l, r, t, -1});
	}
	void upd(int ql, int qr, int c, int l, int r, int rt = 1)
	{
		if (ql &lt;= l &amp;&amp; r &lt;= qr)
			v[rt].cnt += c;
		else
		{
			int m = l + r &gt;&gt; 1;
			if (ql &lt;= m)
				upd(ql, qr, c, l, m, rt &lt;&lt; 1);
			if (qr &gt; m)
				upd(ql, qr, c, m + 1, r, rt &lt;&lt; 1 | 1);
		}
		if (v[rt].cnt)
		{
			v[rt].lbd = v[rt].rbd = 1;
			v[rt].sum = rk[r + 1] - rk[l];
			v[rt].vtl = 2;
		}
		else if (l == r)
			v[rt].sum = v[rt].vtl = v[rt].lbd = v[rt].rbd = 0;
		else
		{
			v[rt].lbd = v[rt &lt;&lt; 1].lbd;
			v[rt].rbd = v[rt &lt;&lt; 1 | 1].rbd;
			v[rt].sum = v[rt &lt;&lt; 1].sum + v[rt &lt;&lt; 1 | 1].sum;
			v[rt].vtl = v[rt &lt;&lt; 1].vtl + v[rt &lt;&lt; 1 | 1].vtl;
			if (v[rt &lt;&lt; 1].rbd &amp;&amp; v[rt &lt;&lt; 1 | 1].lbd)
				v[rt].vtl -= 2;
		}
	}
	ll ask()
	{
		rk.init();
		sort(s.begin(), s.end());
		v.assign(rk.size() &lt;&lt; 2, Node());
		ll ans = 0;
		for (int i = 0; i + 1 &lt; s.size(); ++i)
		{
			ll pre = v[1].sum;
			upd(rk.ask(s[i].l), rk.ask(s[i].r) - 1, s[i].f, 0, rk.size() - 1);
			ans += v[1].vtl * (s[i + 1].h - s[i].h) + abs(v[1].sum - pre);
		}
		return ans + abs(v[1].sum);
	}
};
int main()
{
	for (int n; ~scanf("%d", &amp;n);)
	{
		Perimeter p;
		for (int i = 0, l, b, r, t; i &lt; n; ++i)
		{
			scanf("%d%d%d%d", &amp;l, &amp;b, &amp;r, &amp;t);
			p.add(l, b, r, t);
		}
		printf("%d\n", p.ask());
	}
}
</code></pre>
:ET